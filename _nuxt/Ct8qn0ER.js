import U from"./Cmv833ub.js";import{_ as Y}from"./BI3by318.js";import{u as M,_ as q}from"./DE8y5oN9.js";import{e as z,m as A,r as G,g as H,n as J,c as r,b as i,w as K,j as o,t as a,a as e,d as s,p as O,o as d}from"./Dd4JP3gc.js";const P={class:"container mx-auto px-4 py-8"},Q={key:0,class:"text-center text-lg text-secondary-600 dark:text-secondary-400"},W={key:1,class:"text-center text-red-500 text-lg"},X={key:2},Z={key:3},ee={class:"text-4xl font-extrabold text-center text-primary-700 dark:text-primary-300 mb-8"},te={key:0,class:"text-sm font-normal"},oe={class:"bg-white dark:bg-secondary-800 rounded-lg shadow-md p-6 mb-6"},se={class:"text-secondary-700 dark:text-secondary-300 mb-2"},ne={class:"text-secondary-700 dark:text-secondary-300 mb-2"},ae={class:"text-secondary-700 dark:text-secondary-300 mb-2"},re={class:"text-secondary-700 dark:text-secondary-300"},de={class:"prose dark:prose-invert max-w-none text-secondary-900 dark:text-secondary-100 bg-white dark:bg-secondary-800 p-6 rounded-lg shadow-md overflow-x-auto"},le={class:"whitespace-pre-wrap font-sans"},ie={class:"mt-8 flex justify-center space-x-4"},_e=z({__name:"index",setup(ce){const p=A(),c=p.params.org,x=p.params.regulationId,{versionsData:l,regulationContent:n,loading:$,error:f,fetchRegulationVersions:B,fetchRegulationContent:F}=M(),m=G(null),h=async()=>{await B(c,x),l.value&&l.value.current&&(m.value=l.value.current+".txt",await F(c,x,m.value))};H(h),J(()=>p.params,h,{deep:!0});const L=()=>{const u=encodeURIComponent(window.location.href);window.open(`https://www.facebook.com/sharer/sharer.php?u=${u}`,"_blank","width=600,height=400")},j=()=>{const u=encodeURIComponent(window.location.href);window.open(`https://social-plugins.line.me/lineit/share?url=${u}`,"_blank","width=600,height=400")};return(u,t)=>{var b,g,w,y,k,v,I,C,V,N,R,T,D;const _=U,E=Y,S=q;return d(),r("div",P,[i(E,{to:`/${o(c)}`,class:"inline-flex items-center text-primary-600 dark:text-primary-400 hover:underline mb-6"},{default:K(()=>[i(_,{name:"heroicons-outline:arrow-left",class:"w-5 h-5 mr-1"}),t[0]||(t[0]=s(" 返回自治組織法規清單 "))]),_:1,__:[0]},8,["to"]),o($)?(d(),r("div",Q,"載入中...")):o(f)?(d(),r("div",W,"錯誤："+a(o(f)),1)):!o(l)||!m.value?(d(),r("div",X,t[1]||(t[1]=[e("h1",{class:"text-4xl font-extrabold text-center text-red-500 mb-8"},"法規未找到",-1),e("p",{class:"text-center text-secondary-600 dark:text-secondary-400"},"很抱歉，找不到此法規的最新版本。",-1)]))):(d(),r("div",Z,[e("h1",ee,[s(a(((g=(b=o(n))==null?void 0:b.meta)==null?void 0:g.fullTitle)||"法規內容")+" ",1),(y=(w=o(n))==null?void 0:w.meta)!=null&&y.isCurrent?(d(),r("span",te,"(最新版)")):O("",!0)]),e("div",oe,[e("p",se,[t[2]||(t[2]=e("span",{class:"font-semibold"},"簡稱：",-1)),s(a((v=(k=o(n))==null?void 0:k.meta)==null?void 0:v.shortTitle),1)]),e("p",ne,[t[3]||(t[3]=e("span",{class:"font-semibold"},"審議註記：",-1)),s(a((C=(I=o(n))==null?void 0:I.meta)==null?void 0:C.note),1)]),e("p",ae,[t[4]||(t[4]=e("span",{class:"font-semibold"},"資料來源：",-1)),s(a((N=(V=o(n))==null?void 0:V.meta)==null?void 0:N.source),1)]),e("p",re,[t[5]||(t[5]=e("span",{class:"font-semibold"},"版本日期：",-1)),s(a((T=(R=o(n))==null?void 0:R.meta)==null?void 0:T.date),1)])]),i(S,{orgId:o(c),regulationId:o(x),versions:o(l).versions,currentYmd:m.value.replace(".txt","")},null,8,["orgId","regulationId","versions","currentYmd"]),e("div",de,[e("pre",le,a((D=o(n))==null?void 0:D.content),1)]),e("div",ie,[e("button",{onClick:L,class:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full flex items-center"},[i(_,{name:"logos:facebook",class:"w-5 h-5 mr-2"}),t[6]||(t[6]=s("分享到 Facebook "))]),e("button",{onClick:j,class:"bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-full flex items-center"},[i(_,{name:"logos:line",class:"w-5 h-5 mr-2"}),t[7]||(t[7]=s("分享到 LINE "))])])]))])}}});export{_e as default};
