import{_ as U}from"./MONnU9wI.js";import{u as Y,_ as q}from"./BlZaJQsG.js";import{e as M,m as z,r as A,g as G,p as H,c as r,b as i,w as J,j as o,t as a,a as e,d as s,q as K,n as O,o as l}from"./C0ttgeRf.js";const P={class:"container mx-auto px-4 py-8"},Q={key:0,class:"text-center text-lg text-secondary-600 dark:text-secondary-400"},W={key:1,class:"text-center text-red-500 text-lg"},X={key:2},Z={key:3},ee={class:"text-4xl font-extrabold text-center text-primary-700 dark:text-primary-300 mb-8"},te={key:0,class:"text-sm font-normal"},oe={class:"bg-white dark:bg-secondary-800 rounded-lg shadow-md p-6 mb-6"},se={class:"text-secondary-700 dark:text-secondary-300 mb-2"},ne={class:"text-secondary-700 dark:text-secondary-300 mb-2"},ae={class:"text-secondary-700 dark:text-secondary-300 mb-2"},re={class:"text-secondary-700 dark:text-secondary-300"},le={class:"prose dark:prose-invert max-w-none text-secondary-900 dark:text-secondary-100 bg-white dark:bg-secondary-800 p-6 rounded-lg shadow-md overflow-x-auto"},de={class:"whitespace-pre-wrap font-sans"},ie={class:"mt-8 flex justify-center space-x-4"},xe=M({__name:"index",setup(ce){const p=z(),c=p.params.org,x=p.params.regulationId,{versionsData:d,regulationContent:n,loading:$,error:f,fetchRegulationVersions:B,fetchRegulationContent:F}=Y(),m=A(null),h=async()=>{await B(c,x),d.value&&d.value.current&&(m.value=d.value.current+".txt",await F(c,x,m.value))};G(h),H(()=>p.params,h,{deep:!0});const L=()=>{const u=encodeURIComponent(window.location.href);window.open(`https://www.facebook.com/sharer/sharer.php?u=${u}`,"_blank","width=600,height=400")},j=()=>{const u=encodeURIComponent(window.location.href);window.open(`https://social-plugins.line.me/lineit/share?url=${u}`,"_blank","width=600,height=400")};return(u,t)=>{var b,g,w,y,k,v,I,C,V,N,R,T,D;const _=O("Icon"),E=U,S=q;return l(),r("div",P,[i(E,{to:`/${o(c)}`,class:"inline-flex items-center text-primary-600 dark:text-primary-400 hover:underline mb-6"},{default:J(()=>[i(_,{name:"heroicons-outline:arrow-left",class:"w-5 h-5 mr-1"}),t[0]||(t[0]=s(" 返回組織法規 "))]),_:1,__:[0]},8,["to"]),o($)?(l(),r("div",Q,"載入中...")):o(f)?(l(),r("div",W,"錯誤："+a(o(f)),1)):!o(d)||!m.value?(l(),r("div",X,t[1]||(t[1]=[e("h1",{class:"text-4xl font-extrabold text-center text-red-500 mb-8"},"法規未找到",-1),e("p",{class:"text-center text-secondary-600 dark:text-secondary-400"},"很抱歉，找不到此法規的最新版本。",-1)]))):(l(),r("div",Z,[e("h1",ee,[s(a(((g=(b=o(n))==null?void 0:b.meta)==null?void 0:g.fullTitle)||"法規內容")+" ",1),(y=(w=o(n))==null?void 0:w.meta)!=null&&y.isCurrent?(l(),r("span",te,"(最新版)")):K("",!0)]),e("div",oe,[e("p",se,[t[2]||(t[2]=e("span",{class:"font-semibold"},"簡稱：",-1)),s(a((v=(k=o(n))==null?void 0:k.meta)==null?void 0:v.shortTitle),1)]),e("p",ne,[t[3]||(t[3]=e("span",{class:"font-semibold"},"審議註記：",-1)),s(a((C=(I=o(n))==null?void 0:I.meta)==null?void 0:C.note),1)]),e("p",ae,[t[4]||(t[4]=e("span",{class:"font-semibold"},"資料來源：",-1)),s(a((N=(V=o(n))==null?void 0:V.meta)==null?void 0:N.source),1)]),e("p",re,[t[5]||(t[5]=e("span",{class:"font-semibold"},"版本日期：",-1)),s(a((T=(R=o(n))==null?void 0:R.meta)==null?void 0:T.date),1)])]),i(S,{orgId:o(c),regulationId:o(x),versions:o(d).versions,currentYmd:m.value.replace(".txt","")},null,8,["orgId","regulationId","versions","currentYmd"]),e("div",le,[e("pre",de,a((D=o(n))==null?void 0:D.content),1)]),e("div",ie,[e("button",{onClick:L,class:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full flex items-center"},[i(_,{name:"logos:facebook",class:"w-5 h-5 mr-2"}),t[6]||(t[6]=s("分享到 Facebook "))]),e("button",{onClick:j,class:"bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-full flex items-center"},[i(_,{name:"logos:line",class:"w-5 h-5 mr-2"}),t[7]||(t[7]=s("分享到 LINE "))])])]))])}}});export{xe as default};
